{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Hp\\\\Documents\\\\joules\\\\proyecto_avance\\\\frontend_avance\\\\src\\\\componentes\\\\Login.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport backgroundImage from \"../img/imageninicio.png\"; // Importa la imagen de fondo\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Login() {\n  _s();\n  const navigate = useNavigate(); // Hook para la navegación\n\n  // Estados para almacenar el email y la contraseña\n  const [Email, setEmail] = useState(\"\");\n  const [Password, setPassword] = useState(\"\");\n  const [isLoggedIn, setIsLoggedIn] = useState(false); // Estado para verificar si el usuario está logueado\n\n  // Función para manejar el envío del formulario\n  const handleSubmit = async event => {\n    event.preventDefault(); // Previene el comportamiento predeterminado del formulario\n\n    try {\n      // Envía una solicitud POST al backend para autenticar al usuario\n      const url = process.env.REACT_APP_API_BACK + \"/login/\";\n\n      //const url = process.env.REACT_APP_API_BACK + \"/login/\";\n\n      const response = await axios.post(url, {\n        Email,\n        Password\n      });\n\n      // Verifica la respuesta del backend\n      if (response.status === 200) {\n        const {\n          IdUsuario,\n          Email,\n          Nombres,\n          Rol\n        } = response.data.data;\n\n        // Almacenar los datos en sessionStorage\n        sessionStorage.setItem(\"IdUsuario\", IdUsuario);\n        sessionStorage.setItem(\"Email\", Email);\n        sessionStorage.setItem(\"Nombres\", Nombres);\n        sessionStorage.setItem(\"Rol\", Rol);\n\n        // Si el inicio de sesión es exitoso, actualiza el estado para ocultar el componente Login\n        setIsLoggedIn(true);\n        // Redirige al usuario\n        navigate(\"/inicio\");\n      } else {\n        // Si el backend devuelve un estado diferente, muestra un mensaje de error\n        alert(\"El usuario o la contraseña son incorrectos\");\n      }\n    } catch (error) {\n      console.error(\"Error al iniciar sesión:\", error);\n      // alert(\"Error al iniciar sesión. Por favor, intenta nuevamente.\");\n      alert(\"El usuario o la contraseña son incorrectos mano 2\");\n    }\n  };\n  if (isLoggedIn) {\n    return null; // No renderiza nada si el usuario está logueado\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col md:flex-row justify-center items-center min-h-screen bg-cover bg-center\",\n    style: {\n      backgroundImage: `url(${backgroundImage})`\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-8 md:mb-0 md:mr-8 text-center\",\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-white text-3xl md:text-5xl font-bold uppercase hover:scale-105 transition-transform duration-300\",\n        children: \"Avance de obras\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"bg-white/80 p-6 md:p-8 rounded-lg w-11/12 sm:w-96\",\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-center text-xl font-semibold mb-4\",\n        children: \"Inicio Sesi\\xF3n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"Email\",\n        placeholder: \"Ingrese su correo electr\\xF3nico\",\n        value: Email,\n        onChange: event => setEmail(event.target.value),\n        required: true,\n        autoFocus: true,\n        className: \"block w-full h-12 px-2 mb-4 rounded border border-gray-300 focus:outline-none focus:border-blue-400\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        name: \"Password\",\n        placeholder: \"Password\",\n        value: Password,\n        onChange: event => setPassword(event.target.value),\n        required: true,\n        className: \"block w-full h-12 px-2 mb-4 rounded border border-gray-300 focus:outline-none focus:border-blue-400\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"flex items-center mb-4 text-sm\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          id: \"rememberMe\",\n          name: \"rememberMe\",\n          className: \"h-4 w-4 mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this), \"Recordarme\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\",\n        type: \"submit\",\n        children: \"Iniciar Sesi\\xF3n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n}\n_s(Login, \"+3VsIA7HLo4c5YPzEVVaWkfN3XU=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","axios","useNavigate","backgroundImage","jsxDEV","_jsxDEV","Login","_s","navigate","Email","setEmail","Password","setPassword","isLoggedIn","setIsLoggedIn","handleSubmit","event","preventDefault","url","process","env","REACT_APP_API_BACK","response","post","status","IdUsuario","Nombres","Rol","data","sessionStorage","setItem","alert","error","console","className","style","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","name","placeholder","value","onChange","target","required","autoFocus","id","_c","$RefreshReg$"],"sources":["C:/Users/Hp/Documents/joules/proyecto_avance/frontend_avance/src/componentes/Login.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport backgroundImage from \"../img/imageninicio.png\"; // Importa la imagen de fondo\r\n\r\n\r\nexport default function Login() {\r\n  const navigate = useNavigate(); // Hook para la navegación\r\n\r\n  // Estados para almacenar el email y la contraseña\r\n  const [Email, setEmail] = useState(\"\");\r\n  const [Password, setPassword] = useState(\"\");\r\n  const [isLoggedIn, setIsLoggedIn] = useState(false); // Estado para verificar si el usuario está logueado\r\n\r\n  // Función para manejar el envío del formulario\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault(); // Previene el comportamiento predeterminado del formulario\r\n\r\n    try {\r\n      // Envía una solicitud POST al backend para autenticar al usuario\r\n      const url = process.env.REACT_APP_API_BACK + \"/login/\";\r\n      \r\n      \r\n\r\n      //const url = process.env.REACT_APP_API_BACK + \"/login/\";\r\n\r\n      const response = await axios.post(url, {\r\n        Email,\r\n        Password,\r\n        \r\n      });\r\n\r\n      // Verifica la respuesta del backend\r\n      if (response.status === 200) {\r\n        const { IdUsuario, Email, Nombres, Rol } = response.data.data;\r\n\r\n        // Almacenar los datos en sessionStorage\r\n        sessionStorage.setItem(\"IdUsuario\", IdUsuario);\r\n        sessionStorage.setItem(\"Email\", Email);\r\n        sessionStorage.setItem(\"Nombres\", Nombres);\r\n        sessionStorage.setItem(\"Rol\", Rol);\r\n\r\n        // Si el inicio de sesión es exitoso, actualiza el estado para ocultar el componente Login\r\n        setIsLoggedIn(true);\r\n        // Redirige al usuario\r\n        navigate(\"/inicio\");\r\n      } else {\r\n        // Si el backend devuelve un estado diferente, muestra un mensaje de error\r\n        alert(\"El usuario o la contraseña son incorrectos\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error al iniciar sesión:\", error);\r\n      // alert(\"Error al iniciar sesión. Por favor, intenta nuevamente.\");\r\n      alert(\"El usuario o la contraseña son incorrectos mano 2\");\r\n    }\r\n  };\r\n\r\n  if (isLoggedIn) {\r\n    return null; // No renderiza nada si el usuario está logueado\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className=\"flex flex-col md:flex-row justify-center items-center min-h-screen bg-cover bg-center\"\r\n      style={{ backgroundImage: `url(${backgroundImage})` }}\r\n    >\r\n      <div className=\"mb-8 md:mb-0 md:mr-8 text-center\">\r\n        <h1 className=\"text-white text-3xl md:text-5xl font-bold uppercase hover:scale-105 transition-transform duration-300\">\r\n          Avance de obras\r\n        </h1>\r\n      </div>\r\n      <form\r\n        className=\"bg-white/80 p-6 md:p-8 rounded-lg w-11/12 sm:w-96\"\r\n        onSubmit={handleSubmit}\r\n      >\r\n        <h2 className=\"text-center text-xl font-semibold mb-4\">Inicio Sesión</h2>\r\n        <input\r\n          type=\"text\"\r\n          name=\"Email\"\r\n          placeholder=\"Ingrese su correo electrónico\"\r\n          value={Email}\r\n          onChange={(event) => setEmail(event.target.value)}\r\n          required\r\n          autoFocus\r\n          className=\"block w-full h-12 px-2 mb-4 rounded border border-gray-300 focus:outline-none focus:border-blue-400\"\r\n        />\r\n        <input\r\n          type=\"password\"\r\n          name=\"Password\"\r\n          placeholder=\"Password\"\r\n          value={Password}\r\n          onChange={(event) => setPassword(event.target.value)}\r\n          required\r\n          className=\"block w-full h-12 px-2 mb-4 rounded border border-gray-300 focus:outline-none focus:border-blue-400\"\r\n        />\r\n        <label className=\"flex items-center mb-4 text-sm\">\r\n          <input\r\n            type=\"checkbox\"\r\n            id=\"rememberMe\"\r\n            name=\"rememberMe\"\r\n            className=\"h-4 w-4 mr-2\"\r\n          />\r\n          Recordarme\r\n        </label>\r\n        <button\r\n          className=\"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\"\r\n          type=\"submit\"\r\n        >\r\n          Iniciar Sesión\r\n        </button>\r\n      </form>\r\n    </div>\r\n\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}