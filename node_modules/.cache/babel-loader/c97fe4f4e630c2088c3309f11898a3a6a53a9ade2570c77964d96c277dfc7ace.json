{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Hp\\\\Documents\\\\joules\\\\proyecto_avance\\\\frontend_avance\\\\src\\\\componentes\\\\Login.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport backgroundImage from \"../img/imageninicio.png\"; // Importa la imagen de fondo\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Login() {\n  _s();\n  const navigate = useNavigate(); // Hook para la navegación\n\n  // Estados para almacenar el email y la contraseña\n  const [Email, setEmail] = useState(\"\");\n  const [Password, setPassword] = useState(\"\");\n  const [isLoggedIn, setIsLoggedIn] = useState(false); // Estado para verificar si el usuario está logueado\n\n  // Función para manejar el envío del formulario\n  const handleSubmit = async event => {\n    event.preventDefault(); // Previene el comportamiento predeterminado del formulario\n\n    try {\n      // Envía una solicitud POST al backend para autenticar al usuario\n      const url = process.env.REACT_APP_API_BACK + \"/api/login/\";\n      //const url = process.env.REACT_APP_API_BACK + \"/login/\";\n\n      const response = await axios.post(url, {\n        Email,\n        Password\n      });\n\n      // Verifica la respuesta del backend\n      if (response.status === 200) {\n        const {\n          IdUsuario,\n          Email,\n          Nombres,\n          Rol\n        } = response.data.data;\n\n        // Almacenar los datos en sessionStorage\n        sessionStorage.setItem(\"IdUsuario\", IdUsuario);\n        sessionStorage.setItem(\"Email\", Email);\n        sessionStorage.setItem(\"Nombres\", Nombres);\n        sessionStorage.setItem(\"Rol\", Rol);\n\n        // Si el inicio de sesión es exitoso, actualiza el estado para ocultar el componente Login\n        setIsLoggedIn(true);\n        // Redirige al usuario\n        navigate(\"/talentomejorada\");\n      } else {\n        // Si el backend devuelve un estado diferente, muestra un mensaje de error\n        alert(\"El usuario o la contraseña son incorrectos\");\n      }\n    } catch (error) {\n      console.error(\"Error al iniciar sesión:\", error);\n      // alert(\"Error al iniciar sesión. Por favor, intenta nuevamente.\");\n      alert(\"El usuario o la contraseña son incorrectos mano 2\");\n    }\n  };\n  if (isLoggedIn) {\n    return null; // No renderiza nada si el usuario está logueado\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      backgroundImage: `url(${backgroundImage})`,\n      // Establece la imagen de fondo\n      backgroundSize: \"cover\",\n      // Ajusta el tamaño para cubrir el contenedor\n      backgroundRepeat: \"no-repeat\",\n      // Evita que se repita la imagen\n      backgroundPosition: \"center\",\n      // Centra la imagen\n      minHeight: \"100vh\",\n      // Asegura que ocupe toda la altura de la pantalla\n      display: \"flex\",\n      justifyContent: \"center\",\n      alignItems: \"center\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-white text-4xl font-bold uppercase hover:text-5xl transition-all duration-300\",\n      children: \"Avance de obras\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"form bg-white p-8 rounded-lg\",\n      onSubmit: handleSubmit,\n      style: {\n        backgroundColor: \"rgba(255, 255, 255, 0.8)\"\n      } // Fondo con transparencia\n      ,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-center mb-4\",\n        children: \"Inicio Sesi\\xF3n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"Email\",\n        placeholder: \"Ingrese Su cio\",\n        value: Email,\n        onChange: event => setEmail(event.target.value),\n        required: true,\n        autoFocus: true,\n        className: \"block w-full h-12 px-2 mb-4 rounded border border-gray-300 focus:outline-none focus:border-blue-400\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        name: \"Password\",\n        placeholder: \"Password\",\n        value: Password,\n        onChange: event => setPassword(event.target.value),\n        required: true,\n        className: \"block w-full h-12 px-2 mb-4 rounded border border-gray-300 focus:outline-none focus:border-blue-400\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"checkbox flex items-center mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          value: \"remember-me\",\n          id: \"rememberMe\",\n          name: \"rememberMe\",\n          className: \"h-4 w-4 mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this), \" \", \"Recordarme\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\",\n        type: \"submit\",\n        children: \"Iniciar Sesi\\xF3n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n}\n_s(Login, \"+3VsIA7HLo4c5YPzEVVaWkfN3XU=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","axios","useNavigate","backgroundImage","jsxDEV","_jsxDEV","Login","_s","navigate","Email","setEmail","Password","setPassword","isLoggedIn","setIsLoggedIn","handleSubmit","event","preventDefault","url","process","env","REACT_APP_API_BACK","response","post","status","IdUsuario","Nombres","Rol","data","sessionStorage","setItem","alert","error","console","style","backgroundSize","backgroundRepeat","backgroundPosition","minHeight","display","justifyContent","alignItems","children","className","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","backgroundColor","type","name","placeholder","value","onChange","target","required","autoFocus","id","_c","$RefreshReg$"],"sources":["C:/Users/Hp/Documents/joules/proyecto_avance/frontend_avance/src/componentes/Login.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport backgroundImage from \"../img/imageninicio.png\"; // Importa la imagen de fondo\r\n\r\n\r\nexport default function Login() {\r\n  const navigate = useNavigate(); // Hook para la navegación\r\n\r\n  // Estados para almacenar el email y la contraseña\r\n  const [Email, setEmail] = useState(\"\");\r\n  const [Password, setPassword] = useState(\"\");\r\n  const [isLoggedIn, setIsLoggedIn] = useState(false); // Estado para verificar si el usuario está logueado\r\n\r\n  // Función para manejar el envío del formulario\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault(); // Previene el comportamiento predeterminado del formulario\r\n\r\n    try {\r\n      // Envía una solicitud POST al backend para autenticar al usuario\r\n      const url = process.env.REACT_APP_API_BACK + \"/api/login/\";\r\n      //const url = process.env.REACT_APP_API_BACK + \"/login/\";\r\n\r\n      const response = await axios.post(url, {\r\n        Email,\r\n        Password,\r\n      });\r\n\r\n      // Verifica la respuesta del backend\r\n      if (response.status === 200) {\r\n        const { IdUsuario, Email, Nombres, Rol } = response.data.data;\r\n\r\n        // Almacenar los datos en sessionStorage\r\n        sessionStorage.setItem(\"IdUsuario\", IdUsuario);\r\n        sessionStorage.setItem(\"Email\", Email);\r\n        sessionStorage.setItem(\"Nombres\", Nombres);\r\n        sessionStorage.setItem(\"Rol\", Rol);\r\n\r\n        // Si el inicio de sesión es exitoso, actualiza el estado para ocultar el componente Login\r\n        setIsLoggedIn(true);\r\n        // Redirige al usuario\r\n        navigate(\"/talentomejorada\");\r\n      } else {\r\n        // Si el backend devuelve un estado diferente, muestra un mensaje de error\r\n        alert(\"El usuario o la contraseña son incorrectos\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error al iniciar sesión:\", error);\r\n      // alert(\"Error al iniciar sesión. Por favor, intenta nuevamente.\");\r\n      alert(\"El usuario o la contraseña son incorrectos mano 2\");\r\n    }\r\n  };\r\n\r\n  if (isLoggedIn) {\r\n    return null; // No renderiza nada si el usuario está logueado\r\n  }\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        backgroundImage: `url(${backgroundImage})`, // Establece la imagen de fondo\r\n        backgroundSize: \"cover\", // Ajusta el tamaño para cubrir el contenedor\r\n        backgroundRepeat: \"no-repeat\", // Evita que se repita la imagen\r\n        backgroundPosition: \"center\", // Centra la imagen\r\n        minHeight: \"100vh\", // Asegura que ocupe toda la altura de la pantalla\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n      }}\r\n    >\r\n      <h1 className=\"text-white text-4xl font-bold uppercase hover:text-5xl transition-all duration-300\">Avance de obras</h1>\r\n      <form\r\n        className=\"form bg-white p-8 rounded-lg\"\r\n        onSubmit={handleSubmit}\r\n        style={{ backgroundColor: \"rgba(255, 255, 255, 0.8)\" }} // Fondo con transparencia\r\n      >\r\n        <h2 className=\"text-center mb-4\">Inicio Sesión</h2>\r\n        <input\r\n          type=\"text\"\r\n          name=\"Email\"\r\n          placeholder=\"Ingrese Su cio\"\r\n          value={Email}\r\n          onChange={(event) => setEmail(event.target.value)}\r\n          required\r\n          autoFocus\r\n          className=\"block w-full h-12 px-2 mb-4 rounded border border-gray-300 focus:outline-none focus:border-blue-400\"\r\n        />\r\n        <input\r\n          type=\"password\"\r\n          name=\"Password\"\r\n          placeholder=\"Password\"\r\n          value={Password}\r\n          onChange={(event) => setPassword(event.target.value)}\r\n          required\r\n          className=\"block w-full h-12 px-2 mb-4 rounded border border-gray-300 focus:outline-none focus:border-blue-400\"\r\n        />\r\n        <label className=\"checkbox flex items-center mb-4\">\r\n          <input\r\n            type=\"checkbox\"\r\n            value=\"remember-me\"\r\n            id=\"rememberMe\"\r\n            name=\"rememberMe\"\r\n            className=\"h-4 w-4 mr-2\"\r\n          />{\" \"}\r\n          Recordarme\r\n        </label>\r\n        <button\r\n          className=\"button bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\"\r\n          type=\"submit\"\r\n        >\r\n          Iniciar Sesión\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}